<!DOCTYPE html>
<html lang="en">

	<head>
		<title>rake/instagram/{{.Post}}</title>
		<meta charset="utf-8">
		<meta name="author" content="AppleGamer22">
		<meta name="viewport"
			content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="format-detection" content="telephone=no">
		<meta name="msapplication-tap-highlight" content="no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="white">
		<meta name="theme-color" content="#0cd1e8">
		<meta name="twitter:title" content="Rake Instagram">
		<meta name="og:title" content="Rake Instagram">
		<meta name="og:site_name" content="Rake Instagram">
		<meta name="og:type" content="website">
		<meta http-equiv="Content-Type" content="text/html">
		<link rel="apple-touch-icon" href="/assets/icons/icon-ios-192x192.png">
		<link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
		<!-- <link rel="manifest" href="/manifest.json"> -->
		<link href="/assets/theme.css" rel="stylesheet">
		<link rel="stylesheet" href="/assets/dark.css">
		<script defer src="/assets/bootstrap.bundle.min.js"></script>
		<style>
			h1, h2, h3, h4, h5, h6, label, p, a {
				word-wrap: break-word;
			}
			img, video {
				max-height: auto;
				max-width: 100%;
			}
		</style>
	</head>
	<body>
		<header>
			<nav class="navbar navbar-expand-lg">
				<div class="container-fluid">
					<a class="navbar-brand">
						<img src="/assets/icons/logo.svg" width="30" height="24" class="d-inline-block align-text-top">
						<span class="badge bg-secondary">{{.Version}}</span>
					</a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarNav">
						<ul class="navbar-nav">
							<li class="nav-item">
								<a class="nav-link" href="/">Authentication</a>
							</li>
							<li class="nav-item">
								<a class="nav-link disabled" href="/instagram">Instagram Post</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/highlight">Instagram Highlight</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/story">Instagram Story</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/tiktok">TikTok Post</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/vsco">VSCO Post</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/history">History</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</header>
		<main>
			<form method="get">
				{{if eq .Type "instagram"}}
					{{if .Owner}}
						<div class="mb-3">
							<label class="form-label">owner</label>
							<input type="text" value="{{.Owner}}" class="form-control" disabled>
						</div>
					{{end}}
					<div class="mb-3">
						<label for="post" class="form-label">post ID</label>
						<input type="text" value="{{.Post}}" class="form-control" id="post" name="post" placeholder="https://instagram.com/p/ID">
					</div>
				{{end}}
				{{if eq .Type "highlight"}}
					{{if .Owner}}
						<div class="mb-3">
							<label class="form-label">owner</label>
							<input type="text" value="{{.Owner}}" class="form-control" disabled>
						</div>
					{{end}}
					<div class="mb-3">
						<label class="form-label">highlight ID</label>
						<input type="text" value="{{.Owner}}" class="form-control" id="highlight" name="highlight" placeholder="https://instagram.com/stories/highlights/ID">
					</div>
				{{end}}
				{{if eq .Type "story"}}
					<div class="mb-3">
						<label for="owner" class="form-label">owner</label>
						<input type="text" value="{{.Owner}}" class="form-control" id="owner" name="owner" placeholder="https://www.instagram.com/stories/OWNER">
					</div>
				{{end}}
				{{if eq .Type "tiktok"}}
					<div class="mb-3">
						<label for="owner" class="form-label">owner</label>
						<input type="text" value="{{.Owner}}" class="form-control" id="owner" name="owner" placeholder="https://tiktok.com/@OWNER/video/id">
					</div>
					<div class="mb-3">
						<label for="post" class="form-label">post ID</label>
						<input type="text" value="{{.Post}}" class="form-control" id="post" name="post" placeholder="https://tiktok.com/@owner/video/ID">
					</div>
				{{end}}
				{{if eq .Type "vsco"}}
					<div class="mb-3">
						<label for="owner" class="form-label">owner</label>
						<input type="text" value="{{.Owner}}" class="form-control" id="owner" name="owner" placeholder="https://vsco.co/OWNER/media/id">
					</div>
					<div class="mb-3">
						<label for="post" class="form-label">post ID</label>
						<input type="text" value="{{.Post}}" class="form-control" id="post" name="post" placeholder="https://vsco.co/owner/media/ID">
					</div>
				{{end}}
				<button type="submit" class="btn btn-primary">Submit</button>
			</form>
			{{if .Error}}
				<h3 class="text-danger">{{.Error}}</h3>
			{{end}}
			{{if gt (len .URLs) 0}}
				<div class="card">
					<div class="card-body">
					{{.Date}}
					</div>
				</div>
				<div class="accordion" id="accordion_categories">
					<div class="accordion-item">
						<h2 class="accordion-header" id="heading_categories">
							<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_categories">
								Categories:&nbsp;<b>{{join .Categories ", "}}</b>
							</button>
						</h2>
						<div id="collapse_categories" class="accordion-collapse collapse" data-bs-parent="#accordion_categories">
							<div class="accordion-body">
								<form action="/api/history?media={{.Type}}&post={{.Post}}&owner={{.Owner}}" method="post">
									{{range $category, $checked := .AvailableCategories}}
										{{if $checked}}
											<input type="checkbox" id="{{$category}}" name="{{$category}}" value="{{$category}}" checked>
										{{else}}
											<input type="checkbox" id="{{$category}}" name="{{$category}}" value="{{$category}}">
										{{end}}
										<label for="{{$category}}">{{$category}}</label>
										<br>
									{{end}}
									<input type="hidden" name="method" value="PATCH">
									<button type="submit" class="btn btn-secondary">Submit</button>
								</form>
							</div>
						</div>
					</div>
				</div>
			{{end}}
			{{range $i, $v := .URLs}}
				<ul class="list-group">
					<li class="list-group-item">
						<h6>
							<a href="/api/{{.}}" target="_blank" rel="noopener noreferrer">{{base $v}}</a>
						</h6>
						<form action="/api/history?media={{$.Type}}&post={{$.Post}}&owner={{$.Owner}}" method="post">
							<input type="hidden" name="method" value="DELETE">
							<input type="hidden" name="remove" value="{{$v}}">
							<button type="button" class="btn btn-secondary" data-bs-toggle="collapse" data-bs-target="#collapse{{$i}}">Show/Hide</button>
							<button type="submit" class="btn btn-danger">Delete</button>
						</form>
						<div class="collapse" id="collapse{{$i}}">
							<br>
							{{if or (hasSuffix $v ".jpg") (hasSuffix $v ".webp")}}
								<img src="/api/{{.}}">
							{{else if or (hasSuffix $v ".mp4") (hasSuffix $v ".webm")}}
								<video src="/api/{{.}}" muted controls loop></video>
							{{else}}
								<a href="/api/{{.}}">{{.}}</a>
							{{end}}
						</div>
					</li>
				</ul>
			{{end}}
		</main>
		<noscript>Please enable JavaScript to continue using this application.</noscript>
	</body>

</html>